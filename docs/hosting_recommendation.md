# ホスティング環境に関するアーキテクト提言

> **バージョン**: v1.0
> **作成日**: 2026-02-21
> **宛先**: プロジェクトオーナー
> **作成者**: トップアーキテクト (AI)

---

## 1. はじめに

本ドキュメントは、「Study to Activity」プロジェクトのホスティング環境選定にあたり、アーキテクトとしての提言をまとめたものです。
「人気」「低コスト」「GitHubとの親和性」という3つの要件に基づき、複数のクラウドプラットフォーム(PaaS)を評価し、本プロジェクトに最適な選択肢を示します。

## 2. 評価基準

以下の3つの主要な基準に基づいて、ホスティング候補を評価しました。

1.  **人気とエコシステム**: 開発者コミュニティで広く採用されており、ドキュメントや第三者の情報が豊富か。
2.  **コスト効率**: 本プロジェクトのような小規模なアプリケーションを、無料または非常に低コストで運用開始できるか。将来的なスケールアップ時の価格体系は明確か。
3.  **開発ワークフローとの親和性**: GitHubとシームレスに連携し、`git push` をトリガーとした自動デプロイ（CI/CD）を容易に実現できるか。

## 3. ホスティング候補の比較

本プロジェクトの特性（FastAPIバックエンド + Next.jsフロントエンド[計画中]）を考慮し、以下の3つの有力な候補を比較します。

| 特徴 | Render | Fly.io | Vercel |
|:---|:---|:---|:---|
| **主な用途** | 汎用PaaS（Webサービス、DB、Cron等） | Docker中心、グローバル分散 | フロントエンド特化、Jamstack、サーバーレス |
| **無料枠** | **非常に寛大。** Webサービス（スピンダウン有）、PostgreSQL DB、Redisが無料。 | **寛大。** 小規模なリソース（VM、ディスク）の常時無料枠がある。 | **非常に寛大。** ホビー用途のフロントエンドとサーバーレス関数はほぼ無料。 |
| **コスト** | 予測しやすいリソースベースの価格。無料からの移行がスムーズ。 | 使用量ベース。非常に安価に抑えられる可能性があるが、監視が必要。 | DB等を追加すると高価になる可能性。バックエンドの常時稼働には不向き。 |
| **GitHub連携** | **優れている。** ブランチへのpushをトリガーに自動デプロイ可能。 | **優れている。** CLI (`flyctl`) を通じてGitHub ActionsのCI/CDを自動生成。 | **最高クラス。** フロントエンドに関して、GitHubとの連携は非常にスムーズ。 |
| **使いやすさ** | **非常に高い。** 旧Herokuのような直感的なUIでセットアップ可能。 | **中程度。** CLI中心。Dockerの知識があれば非常に強力。 | **非常に高い。** フロントエンド開発者にとって最も直感的な体験。 |
| **DBホスティング**| **あり（無料枠あり）** | **あり** | **あり** (Vercel Storage) |
| **本プロジェクトへの適合性**| **◎ 非常に高い** | **◯ 高い** | **△ (単体では不適合)** |

## 4. アーキテクトとしての提言

上記の比較分析に基づき、以下の段階的な提言を行います。

### 第一推奨: Render (単体利用)

**現時点で最もバランスが取れた、最善の選択肢です。**

- **理由**:
    1.  **導入の容易さ**: Dockerfileを作成することなく、GitHubリポジトリを接続するだけでFastAPIバックエンドをデプロイできます。
    2.  **完全な無料枠**: FastAPIのWebサービスとPostgreSQLデータベースの両方を無料枠の範囲内で運用開始できます。これはプロジェクトの初期段階において最大のメリットです。
    3.  **シンプルなワークフロー**: `git push` するだけで自動的にビルドとデプロイが行われ、開発体験を損ないません。

将来的には、計画されているNext.jsフロントエンドもRenderのWebサービスとして同居させることが可能です。

### 第二推奨: Vercel + Render (ハイブリッド構成)

**将来的にフロントエンドのパフォーマンスと開発体験を最大化するための、理想的な構成です。**

- **構成**:
    - **フロントエンド (Next.js)**: Vercelにホスティング
    - **バックエンド (FastAPI) + DB (PostgreSQL)**: Renderにホスティング

- **理由**:
    - **Best-of-Breed**: フロントエンドに最適化されたVercelと、バックエンドのホスティングに強いRender、それぞれのプラットフォームの長所を最大限に活用できます。
    - **開発体験**: Next.js開発者にとって、Vercelのプレビュー機能や最適化機能は非常に魅力的です。
    - **コスト効率**: 両サービスの無料枠を組み合わせることで、高性能な構成を無料で実現できます。

### 第三推奨: Fly.io (中〜上級者向け)

**より高いパフォーマンスと柔軟なコントロールを求める場合の選択肢です。**

- **理由**:
    - **パフォーマンス**: アプリケーションをDockerコンテナとして世界中のエッジロケーションに配置するため、ユーザーに近い場所で実行でき、応答性が向上します。
    - **コントロール性**: `fly.toml` という設定ファイルを通じて、インフラを細かくコードで管理できます。
    - **無料枠**: Renderの無料枠で問題になる「スリープからの復帰の遅さ（スピンダウン）」がFly.ioの無料枠では発生しにくく、常時稼働に近い体験が得られます。

- **トレードオフ**:
    - `Dockerfile` の作成が必須となり、セットアップの難易度が少し上がります。

## 5. 結論

**トップアーキテクトとして、本プロジェクトの最初のホスティング環境として `Render` を強く推奨します。**

セットアップの容易さ、充実した無料枠、そしてシンプルな開発ワークフローは、プロジェクトを迅速に立ち上げ、軌道に乗せる上で最も重要な要素です。

プロジェクトが成長し、フロントエンドの要求が高度化してきた段階で、**Vercel + Renderのハイブリッド構成**に移行することを次のステップとして検討するのが合理的です。
